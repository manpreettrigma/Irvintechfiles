function Obj(){this._parent=null,this._handlers=[],this._onceHandlers=[],this._elements=$(),this.on=function(e,i){"function"==typeof e&&void 0===i&&(i=e,e="all"),e=e.toLowerCase().split(" ");for(var n=0;n<e.length;n++)this._handlers.push({event:e[n],handler:i});return this},this.once=function(e,i){"function"==typeof e&&void 0===i&&(i=e,e="all"),e=e.toLowerCase().split(" ");for(var n=0;n<e.length;n++)this._onceHandlers.push({event:e[n],handler:i});return this},this.off=function(e,i){if(void 0===i&&"function"==typeof e)for(var i=e,n=0;n<this._handlers.length;n++)this._handlers[n].handler==i&&this._handlers.splice(n--,1);else if(void 0===i&&"string"==typeof e){e=e.toLowerCase().split(" ");for(var n=0;n<this._handlers.length;n++)e.indexOf(this._handlers[n].event)>-1&&this._handlers.splice(n--,1)}else{e=e.toLowerCase().split(" ");for(var n=0;n<this._handlers.length;n++)e.indexOf(this._handlers[n].event)>-1&&this._handlers[n].handler==i&&this._handlers.splice(n--,1)}return this},this.offOnce=function(e,i){if(void 0===i&&"function"==typeof e)for(var i=e,n=0;n<this._onceHandlers.length;n++)this._onceHandlers[n].handler==i&&this._onceHandlers.splice(n--,1);else if(void 0===i&&"string"==typeof e){e=e.toLowerCase().split(" ");for(var n=0;n<this._onceHandlers.length;n++)e.indexOf(this._onceHandlers[n].event)>-1&&this._onceHandlers.splice(n--,1)}else{e=e.toLowerCase().split(" ");for(var n=0;n<this._onceHandlers.length;n++)e.indexOf(this._onceHandlers[n].event)>-1&&this._onceHandlers[n].handler==i&&this._onceHandlers.splice(n--,1)}return this},this.trigger=function(e,i){e=e.toLowerCase().split(" ");for(var n=0;n<this._handlers.length;n++)(e.indexOf(this._handlers[n].event)>-1||e.indexOf("all")>-1)&&this._handlers[n].handler.call(this,this._handlers[n].event,i);for(var n=0;n<this._onceHandlers.length;n++)(e.indexOf(this._onceHandlers[n].event)>-1||e.indexOf("all")>-1)&&(this._onceHandlers[n].handler.call(this,this._onceHandlers[n].event,i),this._onceHandlers.splice(n--,1));return this},this.subscribe=function(e){return void 0!=e.listener&&"function"==typeof e.listener&&this.on("all",e.listener),this},this.ubsubscribe=function(e){return void 0!=e.listener&&"function"==typeof e.listener&&this.off("all",e.listener),this},this.publish=function(e,i){return this.trigger(e,i)},this.renderer=function(){return $("<div class='Obj'></div>")},this.refresher=function(e){return this.renderer.apply(this)},this.destroyer=function(e){},this.render=function(e,i){var n=this;if(void 0===e)var e="body";if(void 0===i)var i="replace";else i=i.toLowerCase();var s=[].slice.call(arguments,2),d=this;return $(e).each(function(e,t){t=$(t);var f=n.renderer.apply(n,s);n._elements=n._elements.add(f),"append"==i?t.append(f):"prepend"==i?t.prepend(f):"after"==i?t.after(f):"before"==i?t.before(f):"return"==i?d=f:"none"==i||(t.after(f),t.remove())}),this.trigger("render"),d},this.refresh=function(){for(var e=$(),i=0;i<this._elements.length;i++){var n=this._elements.eq(i),s=this.refresher.call(this,n);s?(n.after(s),n.remove(),e=e.add(s)):e=e.add(n)}return this._elements=e,this},this.destroy=function(){var e=this;return this._elements.each(function(i,n){n=$(n),e.destroyer(n)}),this._elements.remove(),this._elements=$(),this}}